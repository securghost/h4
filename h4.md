# [h4 ETAOIN](https://terokarvinen.com/2024/information-security-2024-spring/#h4-etaoin)

I started this lesson with the visit to Tero's webpage: [PGP - Send Encrypted and Signed Message - gpg](https://terokarvinen.com/2023/pgp-encrypt-sign-verify/?fromSearch=crypto)

### Setting Up Trust

Firstly, I set up the trust. I generated key pairs for both Alice and Sille, and exchanged public keys to establish trust between them. This ensures that messages can be securely encrypted and verified.

I installed required tools - 'gpg' encryption tool. The others, 'micro' text editor and 'killall' from psmisc are just helpful extras.

    $ sudo apt-get update
    $ sudo apt-get install gpg micro psmisc

Then I created a keypair.

$ gpg --gen-key

I gave my full name and my email address "sille@example.com.invalid". Obviously, it's not real. 

I did not protect this key with a password. I simply gave empty password (twice) and confirmed that I don't want a password for my key (twice).

I now have a keypair. 

![image](https://github.com/securghost/h4/assets/142783540/c3b6d960-6698-4b1c-a53f-121c181562de)


![image](https://github.com/securghost/h4/assets/142783540/41c2f49f-a8e0-4f55-abea-e5fd23e6f71c)

The keypair consists of public key and secret key. Secret key is secret. If someone ever sees it, I would have to go to each service where it's used and disable it. Public key is public. I can put it on a web page and upload it to key servers.

Publicity of the public key is the magic of the whole system. Now I can exchange key with someone without meeting them.

### Export My Public Key

Alice want's to send me a message. For this, she needs my public key. I'll export it. Plain 'cd' goes to our home directory.

    $ cd
    $ gpg --export --armor --output sille.pub

Parameters to export are:

    --export Export my public key
    --armor Only use ASCII characters, so that the output can be viewed and copy -asted.
    --output sille.pub Save the output into the file "sille.pub"

Let's have a look at our public key:

![image](https://github.com/securghost/h4/assets/142783540/d3baf19c-2548-4f13-8be7-6c248f1c93a3)

### Alice, Simulated

Then I created Alice. I could create another user in the operating system or use another computer. But for the practice sake, I just used a folder to simulate Alice.

    $ cd
    $ mkdir alice/
    $ chmod og-rwx alice/

I created a folder in my home directory. It was protected so that only the owner (me) can use it.

To simulate Alice, I can just work inside this folder, and replace 'gpg' with 'gpg --homedir .' This way, Alice has her own settings and own keyring, separate from the one I actually use.

![image](https://github.com/securghost/h4/assets/142783540/14e7c1d7-b21b-4579-b983-340992606944)

**SideNote: ** The use of "--homedir ." means use current working directory to save gpg configuration files. I can always give the command 'pwd' to see the current working directory, the dot "." in the command.

Listing the fingerprints of all keys prints nothing, because Alice does not yet have any keys. Not her own, and no imported keys. So she (alias I) created her own keypair:

![image](https://github.com/securghost/h4/assets/142783540/ae17baf9-21d4-47dd-a1dc-868d56f8f741)

Real name "Alice Wonderland", email "alice@example.com.invalid", empty passphrase, (x2). And the key was generated.

Alice's key is seen in her keyring. 

![image](https://github.com/securghost/h4/assets/142783540/65475b53-3970-4edf-9573-09036808d792)

### Alice Imports and Verifies Sille's key

So that Alice could send a message to me, she needs my public key.

The public key is literally public. Alice could get it from a web page, key server, unencrypted email - anywhere. The only important thing is to verify that this key really belongs to me. Here, I just copied the exported public key as Alice is simulated.



## x) Read and summarize 

### [â‚¬ Schneier 2015: Applied Cryptography: Chapter 1: Foundations](https://learning.oreilly.com/library/view/applied-cryptography-protocols/9781119096726/08_chap01.html#chap01-sec007)

The information provides insights into the historical, technical, and practical aspects of cryptography, including its fundamental concepts, algorithms, and the immense scale involved in cryptographic calculations and scenarios.
      
### [Disobey 2023](https://www.youtube.com/@Disobey/videos)

I watched the episode [[Disobey 2023] Hacks of the Future and The Role of Humans and Hackers - Connie McIntosh](https://www.youtube.com/watch?v=5WoZ9Pv9k0I)


    a) Encrypt and decrypt a message. Explain the purpose of each step. Explain why you choose the tool you're using. (You can use any tool you want. You must do and report the encryption at the same time, it's not enough to try to remember what we did in the class. )
    m) Voluntary bonus: send and receive encrypted message over email.
    n) Voluntary bonus: Find out frequency distribution of letters for a language that you know (other than English). What are the six most common letters? (This subtask y does not require tests with a computer if the question can be answered without them)
    o) Voluntary bonus: ETAOIN. Crack this ciphertext:
        HDMH'B TH. KWU'YI AWR WSSTOTMJJK M OWQINYIMLIY! MB KWU BII, BTGPJI BUNBHTHUHTWA OTPDIYB OMA NI NYWLIA RTHD SYIEUIAOK MAMJKBTB. BII KWU MH DHHP://HIYWLMYCTAIA.OWG
    p) Voluntary bonus, easy: try rot13, the military grade top-secret encryption of the top-2 empire of year zero. Could double rot13 provide extra security?
    q) Voluntary difficult bonus, requries coding skills: Cryptopals (recommended, if you have what it takes).


## Resources:
T. Karvinen. PGP - Send Encrypted and Signed Message - gpg. URL: https://terokarvinen.com/2023/pgp-encrypt-sign-verify/?fromSearch=crypto. Accessed: 12.2.2024.
